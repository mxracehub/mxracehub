<!-- Mobile Navigation Panel (matches the desktop dropdown structure) -->
<div id="mobile-nav-panel" class="mobile-nav-panel">
  <div class="mobile-nav-content">
    <div class="mobile-nav-header">
      <div class="logo-text">MXRaceHub</div>
      <button id="mobile-nav-close" class="mobile-nav-close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="mobile-nav-buttons">
      <a href="/auth/" class="mobile-signin-btn">
        <span class="user-icon mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </span>
        <span>Sign In</span>
      </a>
      
      <a href="/live-stream/" class="mobile-watch-btn">
        <span class="watch-icon mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </span>
        <span>Watch Live</span>
      </a>
      
      <a href="/tickets/" class="mobile-tickets-btn">
        <span class="ticket-icon mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 10 4 15 9 20"></polyline>
            <path d="M20 4v7a4 4 0 0 1-4 4H4"></path>
          </svg>
        </span>
        <span>Tickets</span>
      </a>
    </div>
    
    <nav class="mobile-nav-menu">
      <div class="accordion-menu">
        <div class="accordion-item">
          <a href="/" class="accordion-link {{ if eq .RelPermalink "/" }}active{{ end }}">Home</a>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/races/") (in .RelPermalink "/races/") }}active{{ end }}">
            <span>Races</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/races/upcoming/" class="accordion-sublink">Upcoming Races</a>
            <a href="/races/supercross/" class="accordion-sublink">Supercross</a>
            <a href="/races/motocross/" class="accordion-sublink">Motocross</a>
            <a href="/races/results/" class="accordion-sublink">Race Results</a>
            <a href="/races/standings/" class="accordion-sublink">Standings</a>
            <a href="/races/schedule/" class="accordion-sublink">Full Schedule</a>
          </div>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/riders/") (in .RelPermalink "/riders/") }}active{{ end }}">
            <span>Riders</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/riders/450/" class="accordion-sublink">450 Class</a>
            <a href="/riders/250/" class="accordion-sublink">250 Class</a>
            <a href="/riders/search/" class="accordion-sublink">Rider Search</a>
            <a href="/riders/champions/" class="accordion-sublink">Champions</a>
          </div>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/tracks/") (in .RelPermalink "/tracks/") }}active{{ end }}">
            <span>Tracks</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/tracks/supercross/" class="accordion-sublink">Supercross Tracks</a>
            <a href="/tracks/motocross/" class="accordion-sublink">Motocross Tracks</a>
            <a href="/tracks/featured/" class="accordion-sublink">Featured Tracks</a>
            <a href="/tracks/map/" class="accordion-sublink">Track Map</a>
          </div>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/news/") (in .RelPermalink "/news/") }}active{{ end }}">
            <span>News</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/news/latest/" class="accordion-sublink">Latest News</a>
            <a href="/news/interviews/" class="accordion-sublink">Rider Interviews</a>
            <a href="/news/analysis/" class="accordion-sublink">Race Analysis</a>
            <a href="/news/video/" class="accordion-sublink">Video Content</a>
          </div>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/betting/") (in .RelPermalink "/betting/") }}active{{ end }}">
            <span>Betting</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/betting/friend-bets/" class="accordion-sublink">Friend Bets</a>
            <a href="/betting/groups/" class="accordion-sublink">Betting Groups</a>
            <a href="/betting/odds/" class="accordion-sublink">Latest Odds</a>
            <a href="/betting/membership/" class="accordion-sublink">Membership</a>
          </div>
        </div>
        
        <div class="accordion-item">
          <button class="accordion-toggle {{ if or (eq .RelPermalink "/account/") (in .RelPermalink "/account/") }}active{{ end }}">
            <span>My Account</span>
            <svg class="accordion-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="accordion-content">
            <a href="/account/profile/" class="accordion-sublink">My Profile</a>
            <a href="/account/bets/" class="accordion-sublink">My Bets</a>
            <a href="/account/wallet/" class="accordion-sublink">Wallet</a>
            <a href="/account/settings/" class="accordion-sublink">Settings</a>
          </div>
        </div>
      </div>
    </nav>
  </div>
</div>

<style>
  /* Mobile navigation panel */
  .mobile-nav-panel {
    position: fixed;
    top: 0;
    right: -100%;
    width: 100%;
    max-width: 350px;
    height: 100vh;
    background-color: white;
    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
    z-index: 60;
    overflow-y: auto;
    transition: right 0.3s ease;
  }
  
  .mobile-nav-panel.visible {
    right: 0;
  }
  
  .mobile-nav-content {
    padding: 1rem;
  }
  
  .mobile-nav-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }
  
  .mobile-nav-close {
    background: none;
    border: none;
    color: var(--text-color, #333);
    cursor: pointer;
    padding: 0.5rem;
  }
  
  .logo-text {
    color: var(--primary-color, #e20613);
    font-size: 1.5rem;
    font-weight: 700;
  }
  
  .mobile-nav-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }
  
  .mobile-signin-btn, .mobile-watch-btn, .mobile-tickets-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    border-radius: 4px;
    text-decoration: none;
    font-weight: 600;
  }
  
  .mobile-watch-btn {
    background-color: var(--primary-color, #e20613);
    color: white;
  }
  
  .mobile-tickets-btn {
    background-color: var(--light-gray, #f2f2f2);
    color: var(--text-color, #333);
  }
  
  .mobile-signin-btn {
    background-color: var(--secondary-color, #003366);
    color: white;
  }
  
  .mr-2 {
    margin-right: 0.5rem;
  }
  
  /* Accordion menu for mobile */
  .accordion-item {
    border-bottom: 1px solid var(--medium-gray, #ddd);
  }
  
  .accordion-link, .accordion-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 1rem 0;
    text-align: left;
    text-decoration: none;
    color: var(--text-color, #333);
    font-weight: 600;
    background: none;
    border: none;
    cursor: pointer;
  }
  
  .accordion-toggle {
    border-bottom: none;
  }
  
  .accordion-arrow {
    transition: transform 0.2s ease;
  }
  
  .accordion-toggle.active .accordion-arrow {
    transform: rotate(180deg);
  }
  
  .accordion-content {
    display: none;
    padding: 0.5rem 0 0.5rem 1rem;
  }
  
  .accordion-content.visible {
    display: block;
  }
  
  .accordion-sublink {
    display: block;
    padding: 0.625rem 0;
    color: var(--dark-gray, #555);
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .accordion-sublink:hover {
    color: var(--primary-color, #e20613);
  }
  
  .accordion-item .accordion-link.active, 
  .accordion-item .accordion-toggle.active {
    color: var(--primary-color, #e20613);
  }
  
  /* Dark mode styling */
  @media (prefers-color-scheme: dark) {
    :root {
      --text-color: #f5f5f5;
      --light-gray: #222;
      --medium-gray: #444;
      --dark-gray: #aaa;
    }
    
    .mobile-nav-panel {
      background-color: #1a1a1a;
    }
    
    .mobile-signin-btn {
      background-color: #002244;
    }
    
    .mobile-tickets-btn {
      background-color: #333;
      color: #f5f5f5;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Mobile navigation toggle
    const mobileNavToggle = document.getElementById('mobile-nav-toggle');
    const mobileNavPanel = document.getElementById('mobile-nav-panel');
    const mobileNavClose = document.getElementById('mobile-nav-close');
    
    if (mobileNavToggle && mobileNavPanel) {
      mobileNavToggle.addEventListener('click', function() {
        mobileNavPanel.classList.add('visible');
        document.body.style.overflow = 'hidden'; // Prevent scrolling when menu is open
      });
    }
    
    if (mobileNavClose && mobileNavPanel) {
      mobileNavClose.addEventListener('click', function() {
        mobileNavPanel.classList.remove('visible');
        document.body.style.overflow = ''; // Restore scrolling
      });
    }
    
    // Mobile accordion menu
    const accordionToggles = document.querySelectorAll('.accordion-toggle');
    
    accordionToggles.forEach(toggle => {
      toggle.addEventListener('click', function() {
        const content = this.nextElementSibling;
        
        // Close all other accordion items
        const allContents = document.querySelectorAll('.accordion-content');
        const allToggles = document.querySelectorAll('.accordion-toggle');
        
        allContents.forEach(item => {
          if (item !== content) {
            item.classList.remove('visible');
          }
        });
        
        allToggles.forEach(item => {
          if (item !== this) {
            item.classList.remove('active');
          }
        });
        
        // Toggle current accordion item
        this.classList.toggle('active');
        content.classList.toggle('visible');
      });
    });
    
    // Close mobile nav on window resize if it goes above mobile breakpoint
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 768 && mobileNavPanel && mobileNavPanel.classList.contains('visible')) {
        mobileNavPanel.classList.remove('visible');
        document.body.style.overflow = '';
      }
    });
  });
</script>